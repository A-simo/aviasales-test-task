import{d as A,c as D,o as p,a as v,b as e,t as f,u as S,F as C,r as U,p as F,e as N,f as x,g as L,w as k,v as w,n as I,h as M,i as V,j as y,k as j,l as O}from"./vendor.c894e22b.js";const R=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&h(a)}).observe(document,{childList:!0,subtree:!0});function g(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(o){if(o.ep)return;o.ep=!0;const n=g(o);fetch(o.href,n)}};R();var B="/aviasales-test-task/assets/logo.12cee1cb.svg";var H=(i,r)=>{const g=i.__vccOpts||i;for(const[h,o]of r)g[h]=o;return g};const E=i=>(F("data-v-d8469802"),i=i(),N(),i),P={class:"ticket-card"},q={style:{display:"flex","justify-content":"space-between","margin-bottom":"20px"}},z={class:"ticket-price"},K=["src"],G={class:"flight-segments"},J={class:"segment-block"},Q={class:"segment-subtitle"},W={class:"segment-title"},X=E(()=>e("p",{class:"segment-subtitle"},"Duration",-1)),Y={class:"segment-title"},Z={class:"segment-subtitle"},tt={class:"segment-title"},et=A({props:{ticketData:null},setup(i){const r=i,g=D(()=>`${new Intl.NumberFormat("ru").format(r.ticketData.price)} R`);function h(a){let c="";return a.length>1&&(c=`${a.length} stops`),a.length===1&&(c=`${a.length} stop`),a.length===0&&(c="Direct flight"),c}function o(a){return`${Math.floor(a/60)}h ${a%60}m`}function n(a,c){const u=new Date(a).getTime(),_=c*6e4+u,T=new Date(u),m=new Date(_),b=String(T.getHours()).padStart(2,"0"),d=String(T.getMinutes()).padStart(2,"0"),t=String(m.getHours()).padStart(2,"0"),l=String(m.getMinutes()).padStart(2,"0");return`${b}:${d} - ${t}:${l}`}return(a,c)=>(p(),v("div",P,[e("div",q,[e("span",z,f(S(g)),1),e("img",{src:`//pics.avs.io/99/36/${i.ticketData.carrier}.png`,alt:"Carrier logo",style:{width:"110px",height:"36px"}},null,8,K)]),e("div",G,[(p(!0),v(C,null,U(i.ticketData.segments,u=>(p(),v("div",J,[e("div",null,[e("p",Q,f(u.origin)+" - "+f(u.destination),1),e("p",W,f(n(u.date,u.duration)),1)]),e("div",null,[X,e("p",Y,f(o(u.duration)),1)]),e("div",null,[e("p",Z,f(h(u.stops)),1),e("p",tt,f(u.stops.join(", ")),1)])]))),256))])]))}});var st=H(et,[["__scopeId","data-v-d8469802"]]);const ot=e("img",{alt:"Aviasales logo",class:"logo",src:B},null,-1),nt={class:"content-wrapper"},at={class:"stops-card"},lt=e("p",{class:"stops-header"},"Number of stops",-1),rt={class:"stops-option"},it=e("span",{class:"checkmark"},null,-1),ct=y(" All "),ut={class:"stops-option"},dt=e("span",{class:"checkmark"},null,-1),pt=y(" Direct "),ht={class:"stops-option"},vt=e("span",{class:"checkmark"},null,-1),gt=y(" 1 stop "),mt={class:"stops-option"},_t=e("span",{class:"checkmark"},null,-1),ft=y(" 2 stops "),kt={class:"stops-option"},yt=e("span",{class:"checkmark"},null,-1),bt=y(" 3 stops "),$t={class:"tickets-wrapper"},wt={class:"sort-buttons-block"},St=y(" The cheapest "),Tt=y(" The fastest "),xt={key:0,style:{"text-align":"center"}},Ct={key:1,style:{"text-align":"center"}},Dt=A({setup(i){const r=x(null),g="https://avs-backend.now.sh/search",h="https://avs-backend.vercel.app/tickets?searchId=",o=x("cheapest"),n=x(["all"]);async function a(){const t=(await fetch(g).then($=>$.json())).searchId;let l=await fetch(`${h}${t}`);for(;!l.ok||await l.clone().json().then($=>!$.stop);)l=await fetch(`${h}${t}`);const s=await l.json();r.value=await s.tickets,b()}const c=D(()=>{var t;return(t=r.value)==null?void 0:t.filter(l=>{if(n.value.includes("all"))return!0;if(n.value.includes(String(l.segments[0].stops.length))&&n.value.includes(String(l.segments[1].stops.length)))return!0})}),u=D(()=>{var d;return(d=c.value)==null?void 0:d.slice(0,_.value)}),_=x(5);function T(){return _.value+=5}function m(){_.value=5}function b(){var d,t;_.value=5,o.value==="cheapest"&&((d=r.value)==null||d.sort((l,s)=>l.price-s.price)),o.value==="fastest"&&((t=r.value)==null||t.sort((l,s)=>l.segments[0].duration+l.segments[1].duration-(s.segments[0].duration+s.segments[1].duration)))}return L(()=>{a()}),(d,t)=>{var l;return p(),v(C,null,[ot,e("div",nt,[e("div",at,[lt,e("label",rt,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),value:"all",onChange:t[1]||(t[1]=s=>m())},null,544),[[w,n.value]]),it,ct]),e("label",ut,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>n.value=s),value:"0",onChange:t[3]||(t[3]=s=>m())},null,544),[[w,n.value]]),dt,pt]),e("label",ht,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>n.value=s),value:"1",onChange:t[5]||(t[5]=s=>m())},null,544),[[w,n.value]]),vt,gt]),e("label",mt,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>n.value=s),value:"2",onChange:t[7]||(t[7]=s=>m())},null,544),[[w,n.value]]),_t,ft]),e("label",kt,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>n.value=s),value:"3",onChange:t[9]||(t[9]=s=>m())},null,544),[[w,n.value]]),yt,bt])]),e("div",$t,[e("div",wt,[e("label",{class:I(["sort-button",{"btn-primary":o.value==="cheapest"}])},[St,k(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value=s),type:"radio",name:"",value:"cheapest",onChange:t[11]||(t[11]=s=>b())},null,544),[[M,o.value]])],2),e("label",{class:I(["sort-button",{"btn-primary":o.value==="fastest"}])},[Tt,k(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.value=s),type:"radio",name:"",value:"fastest",onChange:t[13]||(t[13]=s=>b())},null,544),[[M,o.value]])],2)]),r.value===null?(p(),v("p",xt," Loading tickets... ")):V("",!0),((l=S(c))==null?void 0:l.length)===0?(p(),v("p",Ct," There are no tickets that match your filter settings ")):(p(),v(C,{key:2},[(p(!0),v(C,null,U(S(u),(s,$)=>(p(),j(st,{"ticket-data":s,key:$},null,8,["ticket-data"]))),128)),S(c)!==void 0&&S(c).length>_.value?(p(),v("button",{key:0,class:"btn btn-primary",onClick:t[14]||(t[14]=s=>T())}," Show 5 more flights ")):V("",!0)],64))])])],64)}}});O(Dt).mount("#app");
